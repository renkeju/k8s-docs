[1]: /images/chapter_5/Deployment控制器示例.drawio.png

# 5.1.2 控制器与 Pod 对象

Pod 控制器资源通过持续性地监控集群中运行着地 Pod 资源对象来确保受其管控的资源严格符合用户期望的状态，例如资源副本的数量要精确符合期望等。通常，一个 Pod 控制器资源至少应该包含是三个基本的组成部分。

* 标签选择器：匹配并关联 Pod 资源对象，并据此完成受其管控的 Pod 资源计数。
* 期望的副本数：期望在集群中精确运行着的 Pod 资源的对象数量。
* Pod 模版：用于新建 Pod 资源对象的 Pod 模版资源。

> DaemonSet 用于确保集群中的每个工作节点或符合条件的每个节点上都运行着一个 Pod 副本，而不是精确的数量值，因此不具有上面组成部分中的第二项。

例如，一个如图 5-3 所示的 Deployment 控制器资源使用的标签选择器为“role=be-eshop”，它期望相关的 Pod 资源副本数量精确为3个，少于此数量的缺失部分将由控制器通过 Pod 模版予以创建，而多出的副本也将由控制器负责终止及删除。

![Deployment 控制器示例][1]